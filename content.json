{"meta":{"title":"harukablog","subtitle":null,"description":null,"author":"haruka","url":"http://yoursite.com"},"pages":[],"posts":[{"title":"frp","slug":"frp","date":"2019-01-28T15:57:28.000Z","updated":"2019-01-30T16:05:10.048Z","comments":true,"path":"2019/01/28/frp/","link":"","permalink":"http://yoursite.com/2019/01/28/frp/","excerpt":"","text":"最近发现vultr的vps原来可以访问ipv6的，想打开以前的pt站的我就选了台服务器试试，byr可以访问。有了vps,可以干的事情就很多了，例如部署ssr服务，建站，还有就是内网穿透。因为ipv4地址不够的缘故，我们大多数人都没有公网IP，想实现家里和公司内网互联就很困难，而vps就提供了一个公网ip，我们可以利用这个公网IP 来实现远程互联。frp是github上的一个开源的工具，地址：点击这里github上有很详细的中文文档说明，这里主要说一下怎么使用。 需要条件1.首先要有一台拥有公网ip的服务器,这里叫它s,然后是你想要远程访问的机器叫它c1,你现在身边的机器叫它c2。 下载文件2.然后我们去上面的地址下载最新版，注意根据自己的系统选择版本下载下来后放到服务器s和访问目标机器c1各一份，然后解压。解压后的文件里面主要有服务器s用的文件frps.exe,frps.ini,frps_full.ini以及客户端c1用的文件frpc.exefrpc.inifrpc_full.ini 这些文件其实主要用到的就exe文件和ini配置文件，full.ini文件是配置的全量版本，需要的话可以把full.ini里的配置复制到.ini里面使用。 默认配置3.frps.ini里面默认是最简配置，但是可以使用。在解压后的文件夹里执行 1./frps -c ./frps.ini 即可启动服务客户端需要配置公网ip地址1server_addr = x.x.x.x 然后在文件夹地址下执行命令，win下使用cmd或powershell都可以1./frpc -c ./frpc.ini 然后就可以在c2上ssh访问c1了1ssh -oPort=6000 user@x.x.x.x 这里的user用你c1的用户名 配置windows远程桌面连接4.到上面为止，我们实现了初步linux的ssh远程访问，接下来我们来尝试windows的远程桌面连接配置也很简单,只要在frpc.ini里面做如下配置12345[rdp]type = tcplocal_ip = 127.0.0.1local_port = 3389remote_port = 6000 配置完后再重新执行1./frps -c ./frps.ini 然后win下打开远程连接输入地址x.x.x.x:6000 服务开机启动5.在上面我们实现了远程连接，问题是关了cmd或者bash窗口,服务就关闭了，这就很不方便,于是我们就需要设置服务开机启动,服务端与客户端是类似的，我这里以win为客户端，linux为服务端，如果以win为服务端，linux为客户端，将相应的配置中frpc或者frps互换即可 win平台win下可以写一个bat文件，然后使用一个叫nssm的软件注册为服务开机启动 12345@echo off start &quot;C:\\Windows\\System32\\cmd.exe&quot; cd C:\\green\\frp_0.23.1_windows_amd64 frpc -c frpc.iniexit linux使用systemd配置开机自启，适用于 centos7 Ubuntu 16 或 debian 8。新建文件1vi /etc/systemd/system/frps.service 并写入以下内容:1234567891011121314[Unit]Description=frps daemonAfter=syslog.target network.targetWants=network.target[Service]Type=simpleExecStart=/usr/frp/frps -c /usr/frp/frps.ini #此处地址为你frps文件所在地址Restart= alwaysRestartSec=1minExecStop=/usr/frp/killall frps[Install]WantedBy=multi-user.target 使用1sudo systemctl enable frps.service 启用 闲的蛋疼配置远程访问win10下的linux子系统wsl想要访问wsl首先要配置wsl的开机启动，这里我用网上找的的vbs脚本12Set ws = WScript.CreateObject(&quot;WScript.Shell&quot;)ws.run &quot;C:\\Windows\\System32\\bash.exe -c &apos;sudo service ssh start&apos;&quot;,0 这里的bash是linux什么版本是根据你安装的linux版本来的，默认好像Ubuntu 16，是可以切换的，切换命令为1wslconfig /l 然后自动启动sshd服务。首先要看看wsl里面装了sshd没有，没有的话可以装一下新版本的win10预装了win平台下的ssh和sshd，如果要用wsl里面的sshd，最好关了win平台下的sshd,不然端口会被占用,除非改掉端口安装sshd12sudo apt-get remove openssh-serversudo apt-get install openssh-server","categories":[],"tags":[{"name":"frp，内网穿透","slug":"frp，内网穿透","permalink":"http://yoursite.com/tags/frp，内网穿透/"}]},{"title":"Hello World","slug":"hello-world","date":"2019-01-23T17:18:19.762Z","updated":"2019-01-23T17:18:19.762Z","comments":true,"path":"2019/01/24/hello-world/","link":"","permalink":"http://yoursite.com/2019/01/24/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}